@model Web4.Models.ViewModels.MovimientoViewModel

@{
    ViewBag.Title = "Movimiento Bienes";
    Layout = "~/Views/Shared/_Layout.cshtml";


}

<h2>@ViewBag.Title</h2>

<div>
    <p class="text-success">
        <h3>@ViewBag.Message</h3>
    </p>
</div>

@using (Html.BeginForm("Anadir", "Movimiento", FormMethod.Post))
{
    <div class="container">
        <div class="row">
            <div class="col-md-6">

                <fieldset>
                    <legend>Identificacion</legend>
                    @Html.EditorForModel()
                </fieldset>

            </div>
            <div class="col-md-6">

                <fieldset>
                    <legend>Detalle</legend>
                    <div class="form-group">
                        <div class="editor-label">
                            <label for="Descripcion">Descripcion</label>
                        </div>
                        <div class="editor-field">
                            <input class="text-box single-line" id="Descripcion" name="Descripcion" type="text" value="">
                            <span class="field-validation-valid" data-valmsg-for="Descripcion" data-valmsg-replace="true"></span>
                        </div>
                        <div class="editor-label">
                            <label for="Marca">Marca</label>
                        </div>
                        <div class="editor-field">
                            <input class="text-box single-line" id="Marca" name="Marca" type="text" value="">
                            <span class="field-validation-valid" data-valmsg-for="Marca" data-valmsg-replace="true"></span>
                        </div>
                        <div class="editor-label">
                            <label for="Modelo">Modelo</label>
                        </div>
                        <div class="editor-field">
                            <input class="text-box single-line" id="Modelo" name="Modelo" type="text" value="">
                            <span class="field-validation-valid" data-valmsg-for="Modelo" data-valmsg-replace="true"></span>
                        </div>
                        <div class="editor-label">
                            <label for="Serie">Serie</label>
                        </div>
                        <div class="editor-field">
                            <input class="text-box single-line" id="Serie" name="Serie" type="text" value="">
                            <span class="field-validation-valid" data-valmsg-for="Serie" data-valmsg-replace="true"></span>
                        </div>
                        <div class="editor-label">
                            <label for="Estado">Estado</label>
                        </div>
                        <div class="editor-field">
                            <input class="text-box single-line" id="Estado" name="Estado" type="text" value="">
                            <span class="field-validation-valid" data-valmsg-for="Estado" data-valmsg-replace="true"></span>
                        </div>
                        <div class="editor-label">
                            <label for="UsuarioPC">UsuarioPC</label>
                        </div>
                        <div class="editor-field">
                            <input class="text-box single-line" id="UsuarioPC" name="UsuarioPC" type="text" value="">
                            <span class="field-validation-valid" data-valmsg-for="UsuarioPC" data-valmsg-replace="true"></span>
                        </div><div class="editor-label">
                            <label for="NombrePC">NombrePC</label>
                        </div>
                        <div class="editor-field">
                            <input class="text-box single-line" id="NombrePC" name="NombrePC" type="text" value="">
                            <span class="field-validation-valid" data-valmsg-for="NombrePC" data-valmsg-replace="true"></span>
                        </div>
                        <div class="editor-label">
                            <label for="Devuelto">Devuelto</label>
                        </div>
                        <div class="editor-field">
                            <input class="text-box single-line" id="Devuelto" name="Devuelto" type="text" value="">
                            <span class="field-validation-valid" data-valmsg-for="Devuelto" data-valmsg-replace="true"></span>
                        </div>
                    </div>

                </fieldset>

            </div>
        </div>

    </div>

    <input type="button" value="Anadir"
           onclick="AnadirMovimiento(); return false;" />


    <div id="divMovimientos">
        <table class="table">
            <tbody id="tablaMovimiento">

                <tr>
                    <th>Descripcion</th>
                    <th>Marca</th>
                    <th>Modelo</th>
                    <th>Serie</th>
                    <th>Estado</th>
                    <th>UsuarioPC</th>
                    <th>NombrePC</th>
                    <th>Devuelto</th>
                </tr>

            </tbody>
        </table>

    </div>

    <div class="form-group">
        <input type="submit" name="name" value="Registrar" />
    </div>

}



<script>

    var num = 0;

    function AnadirMovimiento() {
        console.log("hola");

        let Descripcion = document.getElementById("Descripcion").value;
        let Marca = document.getElementById("Marca").value;

        if (Descripcion.length > 0 && Marca.length > 0) {

            //agregar a la tabla movimientos
            // identificar la tabla
            // crear tr
            // crear td
            // innterHTML de td
            // agregar tr a tabla

            let TablaMovimientos = document.getElementById("tablaMovimiento");
            let TR = document.createElement("tr");
            let TDDescripcion = document.createElement("td");
            let TDMarca = document.createElement("td");
            TDDescripcion.innerHTML = Descripcion;
            TDMarca.innerHTML = Marca;
            TR.appendChild(TDDescripcion);
            TR.appendChild(TDMarca);
            TablaMovimientos.appendChild(TR);


            //agregar hiddens
            let DivMovimientos = document.getElementById("divMovimientos");
            let HiddenIndex = document.createElement("input");
            let HiddenDescripcion = document.createElement("input");
            let HiddenMarca = document.createElement("input");

            HiddenIndex.type = "hidden";
            HiddenIndex.name = "Equipos.Index";
            HiddenIndex.value = num;

            HiddenDescripcion.type = "hidden";
            HiddenDescripcion.name = "Equipos[" + num + "].Descripcion";
            HiddenDescripcion.value = Descripcion;

            HiddenMarca.type = "hidden";
            HiddenMarca.name = "Equipos[" + num + "].Marca";
            HiddenMarca.value = Marca;

            DivMovimientos.appendChild(HiddenIndex);
            DivMovimientos.appendChild(HiddenDescripcion);
            DivMovimientos.appendChild(HiddenMarca);

            document.getElementById("Descripcion").value = "";
            document.getElementById("Marca").value = "";

            num++;
        }

    }


</script>






